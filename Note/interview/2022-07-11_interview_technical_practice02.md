# interview : technical practice02



## Network

### OSI 7 Layer

1. 물리 계층
   - 데이터가 전기 신호로 변환되어 주고 받는 기능을 진행하는 계층 
2. 데이터 링크 계층 
   - 물리 계층으로 송수신되는 정보를 관리하여 안전하게 전달되도록 도와주는 역할 
   - Mac 주소를 통해 통신한다. 
3. 네트워크 계층
   - 데이터가 목적지까지 가장 안전하고 빠르게 전달되도록 한다. 
   - 라우터를 통해 이동할 경로를 선택하여 IP 주소를 지정하고, 해당 경로에 따라 패킷을 전달한다. 
   - 라우팅, 흐름제어, 오류제어, 세그멘테이션 등을 수행
4. 전송 계층
   - TCP 혹은 UDP 프로토콜을 통해 통신을 활성화한다. 
   - 포트를 열러 프로그램들이 전송을 할 수 있도록 제공한다. 
   - TCP 는 신뢰성 보장, 연결 지향적 
   - UDP 는 비신뢰성, 비연결 지향적
5. 세션 계층
   - 데이터가 통신하기 위한 논리적 연결을 담당. TCP/IP 세션을 만들고 없애는 책임 
6. 표현 계층  (representational)
   - 데이터의 표현에 대한 독립성 제공 및 암호화 담당 
   - 인코딩, 명령어 포장, 압축, 암호화 등  
7. 응용 계층 (applicational)
   - 데이터의 최종 목적지로, 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행
   - 사용자 인터페이스, 전자우편, 데이터베이스 관리 등의 서비스 제공 



### TCP 3 way handshake 

TCP 는 전송 계층의 프로토콜로, 

1. 연결 지향 프로토콜을 사용하여, 신뢰성을 구축하고 수신 여부를 확인하여 loss 시 재전송도 가능 
2. 가상회신 패킷 교환 방식을 통해 패킷 사이의 순서도 보장한다.

 신뢰성을 구축하기 위해 통신에 앞서 3-way handshake 과정을 진행한다. 

1. 클라이언트가 서버에게 SYN 패킷을 전송
2. 서버는 SYN 패킷을 수신하고, 응답으로 받았다는 신호인 ACK 와 SYN 패킷을 클라리언트로 보냄
3. 클라이언트는 ACK 와 SYN 패킷을 받고, SYN 패킷에 대한 응답으로 ACK 를 서버로 보냄

연결 해제 시엔 4-way handshake 를 진행

1.  클라이언트가 서버에게 연결을 종료한다는 의미의 FIN 플래그를 보냄
2. 서버는 FIN 을 받고, 확인했다는 의미의 ACK 를 클라이언트에 보낸다. 또한 모든 데이터를 보내기 위해 CLOST_WAIT 상태가 된다. 
3. 서버는 데이터를 모두 보낸 후, 연결 종료 의미의 FIN 플래그를 클라이언트에 보낸다. 
4. 클라이언트는 FIN 을 수신하고, 확인의 의미로 ACK 를 서버에 보낸다. 또한 TIME_WAIT 상태가 되어 서버로부터 아직 받지 못한 데이터가 있을 수 있으므로 기다린다. 

- 서버는 ACK 를 받은 후 소켓을 닫는다. 

- TIME_WAIT 시간이 끝난 후 클라이언트도 닫는다.  

### TCP 흐름제어 & 혼잡제어

1. 흐름제어 (endsystem to endsystem)

   - 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법 
   - 수신 측이 수신 가능한 양보다 더 많은 데이터가 도착하게 되면, 데이터가 손실될 수 있고, 이 경우 ㅂ루필요한 응답과 데이터 전송이 빈번히 발생하게 된다. 
   - Stop and Wait 
     - 매번 전송한 패킷에 대해 확은 응답을 받은 후 다음 패킷을 전송
   - Sliding Window 
     - 수신측에서 설정한 윈도우 크기만큼 패킷을 전송하고, 패킷의 전달을 확인한 후 윈도우를 옆으로 옮겨 그 다음 패킷들을 전송 

2. 혼잡제어 (Congestion Control)

   - 송신측의 데이터는 지역망이나 인터넷으로 연결된 대형 네트워크를 통해 전달되는데, 만약 한 라우터에 데이터가 몰리는 경우 자신에게 온 데이터를 모두 처리할 수 없다. 
   - 또한 이 경우 재전송을 하게 되어 혼잡이 가중되기 때문에, 네트워크 혼잡을 피하기 위해 송신측에선 보내는 데이터의 속도를 강제로 줄여야 한다.
   - AIMD(Additive Increase, Multiplicative Decrease)
   - `+` slow start, fast retransmit, fast recovery

   
